<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="566px" preserveAspectRatio="none" style="width:1020px;height:566px;" version="1.1" viewBox="0 0 1020 566" width="1020px" zoomAndPan="magnify"><defs><filter height="300%" id="f1bygwtoknmezc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="314" x="346.5" y="17.4023">InboundThirdpartyTransactionModel</text><polygon fill="#FEFECE" filter="url(#f1bygwtoknmezc)" points="328,279.1992,340,291.1992,328,303.1992,316,291.1992,328,279.1992" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="703" cy="37.1992" fill="#000000" filter="url(#f1bygwtoknmezc)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><g id="transactionRequestReceived"><rect fill="#FEFECE" filter="url(#f1bygwtoknmezc)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="597" y="124.1992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="597" x2="809" y1="150.6875" y2="150.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="607" y="142.7344">transactionRequestReceived</text></g><g id="quoteReceived"><rect fill="#FEFECE" filter="url(#f1bygwtoknmezc)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="643" y="266.1992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="643" x2="763" y1="292.6875" y2="292.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="653" y="284.7344">quoteReceived</text></g><g id="authorizationReceived"><rect fill="#FEFECE" filter="url(#f1bygwtoknmezc)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="330.5" y="423.1992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="330.5" x2="503.5" y1="449.6875" y2="449.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="340.5" y="441.7344">authorizationReceived</text></g><g id="transactionSuccess"><rect fill="#FEFECE" filter="url(#f1bygwtoknmezc)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="7" y="423.1992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="157" y1="449.6875" y2="449.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="17" y="441.7344">transactionSuccess</text></g><ellipse cx="82" cy="544.1992" fill="none" filter="url(#f1bygwtoknmezc)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="82.5" cy="544.6992" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><path d="M37,270.6992 L37,311.3203 A0,0 0 0 0 37,311.3203 L281,311.3203 A0,0 0 0 0 281,311.3203 L281,295.1992 L315.92,291.1992 L281,287.1992 L281,280.6992 L271,270.6992 L37,270.6992 A0,0 0 0 0 37,270.6992 " fill="#FBFB77" filter="url(#f1bygwtoknmezc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M271,270.6992 L271,280.6992 L281,280.6992 L271,270.6992 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="43" y="288.2676">This check could be done by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="43" y="303.5781">central auth-service, or DFSP's own</text><!--MD5=[e60e105b3452435988ccb7b650f54f56]
link *start to transactionRequestReceived--><path d="M703,47.1992 C703,62.6592 703,94.8792 703,118.7992 " fill="none" id="*start-to-transactionRequestReceived" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="703,124.0692,707,115.0692,703,119.0692,699,115.0692,703,124.0692" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="704" y="90.7676">on</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="724" y="90.4438">POST /thirdpartyRequests/transaction</text><!--MD5=[f8ee778cfc0ba577e0425b8221d02de9]
link transactionRequestReceived to quoteReceived--><path d="M703,174.2692 C703,198.2092 703,234.9792 703,260.6692 " fill="none" id="transactionRequestReceived-to-quoteReceived" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="703,265.9792,707,256.9792,703,260.9792,699,256.9792,703,265.9792" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="741" y="217.7676">call</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="767" y="217.4438">getQuote()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="704" y="233.0781">wait for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="756" y="232.7544">PUT /quotes/{ID}</text><!--MD5=[d3a0d6f5c67794fded53bc6f2b43fcdd]
link quoteReceived to authorizationReceived--><path d="M697.42,316.4092 C690.8,339.6392 677.42,373.9292 653,393.1992 C612.33,425.2892 556.11,438.9992 508.75,444.5892 " fill="none" id="quoteReceived-to-authorizationReceived" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="503.61,445.1592,513.0004,448.129,508.5787,444.6008,512.1069,440.179,503.61,445.1592" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="708" y="367.2676">call</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="734" y="366.9438">authorizeTransaction()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="687" y="382.5781">wait for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="739" y="382.2544">PUT /authorizations/{ID}</text><!--MD5=[003f037abbbbcc3007a3249a6ab274fa]
link authorizationReceived to isValid--><path d="M355.36,423.0692 C343.23,415.3892 332.09,405.5792 325,393.1992 C309.08,365.3892 317.41,325.8392 323.48,305.4692 " fill="none" id="authorizationReceived-to-isValid" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="325.04,300.4892,318.5452,307.8931,323.5535,305.2631,326.1835,310.2715,325.04,300.4892" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="326" y="374.7676">isValid?</text><!--MD5=[1e77c269d24673811a108b841e507967]
link isValid to authorizationReceived--><path d="M334.02,297.2892 C344.28,306.2492 365.29,325.8192 378,346.1992 C392.09,368.7892 402.53,397.2992 409.04,418.2692 " fill="none" id="isValid-to-authorizationReceived" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="410.53,423.1592,411.7351,413.3844,409.0736,418.376,404.082,415.7146,410.53,423.1592" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="502" y="359.7676">FALSE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="421" y="375.0781">call</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="447" y="374.7544">authorizeTransaction()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="400" y="390.3887">wait for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="452" y="390.0649">PUT /authorizations/{ID}</text><!--MD5=[1b04568a296cea37d58139862348f7dc]
link isValid to transactionSuccess--><path d="M322.44,298.4192 C317.04,304.0292 308.31,312.0292 299,316.1992 C217.76,352.5592 165.05,284.3892 101,346.1992 C82.02,364.5092 78.63,395.3492 79.14,418.1492 " fill="none" id="isValid-to-transactionSuccess" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="79.32,423.1692,82.9822,414.0266,79.1339,418.1727,74.9878,414.3243,79.32,423.1692" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="186" y="359.7676">TRUE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="123" y="375.0781">call</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="149" y="374.7544">executeTransfer()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="102" y="390.3887">wait for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="154" y="390.0649">PUT /transfers/{ID}</text><!--MD5=[4bc9a7d86f0ddc6db30e0fbdd6134632]
link transactionSuccess to *end--><path d="M82,473.4092 C82,491.0392 82,514.3292 82,529.0392 " fill="none" id="transactionSuccess-to-*end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="82,534.0392,86,525.0392,82,529.0392,78,525.0392,82,534.0392" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fb74209bedc1c4a6bb9781954fa82676]
@startuml InboundThirdpartyTransactionModel

title InboundThirdpartyTransactionModel

state isValid <<choice>>

[*] - -> transactionRequestReceived: on ""POST /thirdpartyRequests/transaction""
transactionRequestReceived - -> quoteReceived: call ""getQuote()""\nwait for ""PUT /quotes/{ID}""
quoteReceived - -> authorizationReceived: call ""authorizeTransaction()""\nwait for ""PUT /authorizations/{ID}""
authorizationReceived - -> isValid: isValid?
isValid - -> transactionSuccess:**TRUE**\ncall ""executeTransfer()""\nwait for ""PUT /transfers/{ID}""
isValid - -> authorizationReceived:**FALSE**\ncall ""authorizeTransaction()""\nwait for ""PUT /authorizations/{ID}""
transactionSuccess - -> [*]

note left of isValid : This check could be done by\ncentral auth-service, or DFSP's own

@enduml

PlantUML version 1.2020.18(Thu Oct 01 03:40:44 PHT 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>