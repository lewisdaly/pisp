<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="709px" preserveAspectRatio="none" style="width:477px;height:709px;" version="1.1" viewBox="0 0 477 709" width="477px" zoomAndPan="magnify"><defs><filter height="300%" id="f1dftp74hl1m7r" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="330" x="77.5" y="17.4023">OutboundThirdpartyTransactionModel</text><ellipse cx="92.5" cy="39.1992" fill="#000000" filter="url(#f1dftp74hl1m7r)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1dftp74hl1m7r)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="67" y="126.1992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="67" x2="118" y1="152.6875" y2="152.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="77" y="144.7344">start</text><rect fill="#FEFECE" filter="url(#f1dftp74hl1m7r)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="32" y="268.1992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="32" x2="153" y1="294.6875" y2="294.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="42" y="286.7344">payeeResolved</text><rect fill="#FEFECE" filter="url(#f1dftp74hl1m7r)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="6" y="410.1992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="6" x2="179" y1="436.6875" y2="436.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="16" y="428.7344">authorizationReceived</text><rect fill="#FEFECE" filter="url(#f1dftp74hl1m7r)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="17.5" y="567.1992"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="17.5" x2="167.5" y1="593.6875" y2="593.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="27.5" y="585.7344">transactionSuccess</text><ellipse cx="92.5" cy="688.1992" fill="none" filter="url(#f1dftp74hl1m7r)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="93" cy="688.6992" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><!--link *start to start--><path d="M92.5,49.1992 C92.5,64.6592 92.5,96.8792 92.5,120.7992 " fill="none" id="*start-start" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="92.5,126.0692,96.5,117.0692,92.5,121.0692,88.5,117.0692,92.5,126.0692" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="93.5" y="92.7676">on creation of state machine</text><!--link start to payeeResolved--><path d="M92.5,176.2692 C92.5,200.2092 92.5,236.9792 92.5,262.6692 " fill="none" id="start-payeeResolved" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="92.5,267.9792,96.5,258.9792,92.5,262.9792,88.5,258.9792,92.5,267.9792" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="146.5" y="219.7676">call</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="172.5" y="219.4438">resolvePayee()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="93.5" y="235.0781">wait for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="145.5" y="234.7544">PUT /parties/{type}/{ID}</text><!--link payeeResolved to authorizationReceived--><path d="M92.5,318.2692 C92.5,342.2092 92.5,378.9792 92.5,404.6692 " fill="none" id="payeeResolved-authorizationReceived" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="92.5,409.9792,96.5,400.9792,92.5,404.9792,88.5,400.9792,92.5,409.9792" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="93.5" y="361.7676">call</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="119.5" y="361.4438">executeThirdPartyTransaction()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="124.5" y="377.0781">wait for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="176.5" y="376.7544">POST /authorization</text><!--link authorizationReceived to transactionSuccess--><path d="M92.5,460.4192 C92.5,487.8292 92.5,532.4792 92.5,561.8492 " fill="none" id="authorizationReceived-transactionSuccess" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="92.5,567.1492,96.5,558.1492,92.5,562.1492,88.5,558.1492,92.5,567.1492" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="163" y="503.7676">ask user to sign with FIDO credential</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="208.5" y="519.0781">call</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="230.5" y="518.7544">signChallenge()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="93.5" y="534.3887">wait for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="145.5" y="534.0649">PUT /thirdpartyRequests/transaction/{ID}</text><!--link transactionSuccess to *end--><path d="M92.5,617.4092 C92.5,635.0392 92.5,658.3292 92.5,673.0392 " fill="none" id="transactionSuccess-*end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="92.5,678.0392,96.5,669.0392,92.5,673.0392,88.5,669.0392,92.5,678.0392" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml OutboundThirdpartyTransactionModel

title OutboundThirdpartyTransactionModel

[*] - -> start: on creation of state machine
start - -> payeeResolved: call ""resolvePayee()""\nwait for ""PUT /parties/{type}/{ID}""
payeeResolved - -> authorizationReceived: call ""executeThirdPartyTransaction()""\nwait for ""POST /authorization""
authorizationReceived - -> transactionSuccess: ask user to sign with FIDO credential\ncall""signChallenge()""\nwait for ""PUT /thirdpartyRequests/transaction/{ID}""
transactionSuccess - -> [*]

@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 PHT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>