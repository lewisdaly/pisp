<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="497px" preserveAspectRatio="none" style="width:744px;height:497px;" version="1.1" viewBox="0 0 744 497" width="744px" zoomAndPan="magnify"><defs><filter height="300%" id="ffwen6vy7p5yh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="213" x="263" y="29.4023">PISP Linking: Pre-linking</text><rect fill="#DDDDDD" height="449.8789" style="stroke: #A80036; stroke-width: 1.0;" width="99" x="1" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="4" y="53.7676">Mobile device</text><rect fill="#DDDDDD" height="449.8789" style="stroke: #A80036; stroke-width: 1.0;" width="54" x="357" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="370.5" y="53.7676">PISP</text><rect fill="#DDDDDD" height="449.8789" style="stroke: #A80036; stroke-width: 1.0;" width="70" x="668" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="672.5" y="53.7676">Mojaloop</text><rect fill="#FFFFFF" filter="url(#ffwen6vy7p5yh)" height="337.5918" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="45.5" y="105.998"/><rect fill="#FFFFFF" filter="url(#ffwen6vy7p5yh)" height="128.0195" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="127.3086"/><rect fill="#FFFFFF" filter="url(#ffwen6vy7p5yh)" height="73.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="360.6582"/><rect fill="#FFFFFF" filter="url(#ffwen6vy7p5yh)" height="217.5723" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="226.0176"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="50.5" x2="50.5" y1="95.998" y2="452.5898"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="384" x2="384" y1="95.998" y2="452.5898"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="703" x2="703" y1="95.998" y2="452.5898"/><rect fill="#FEFECE" filter="url(#ffwen6vy7p5yh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="27.5" y="60.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="34.5" y="81.0449">App</text><rect fill="#FEFECE" filter="url(#ffwen6vy7p5yh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="27.5" y="451.5898"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="34.5" y="472.125">App</text><rect fill="#FEFECE" filter="url(#ffwen6vy7p5yh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="361" y="60.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="368" y="81.0449">PISP</text><rect fill="#FEFECE" filter="url(#ffwen6vy7p5yh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="361" y="451.5898"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="368" y="472.125">PISP</text><rect fill="#FEFECE" filter="url(#ffwen6vy7p5yh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="672" y="60.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="679" y="81.0449">Switch</text><rect fill="#FEFECE" filter="url(#ffwen6vy7p5yh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="672" y="451.5898"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="679" y="472.125">Switch</text><rect fill="#FFFFFF" filter="url(#ffwen6vy7p5yh)" height="337.5918" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="45.5" y="105.998"/><rect fill="#FFFFFF" filter="url(#ffwen6vy7p5yh)" height="128.0195" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="127.3086"/><rect fill="#FFFFFF" filter="url(#ffwen6vy7p5yh)" height="73.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="360.6582"/><rect fill="#FFFFFF" filter="url(#ffwen6vy7p5yh)" height="217.5723" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="698" y="226.0176"/><polygon fill="#A80036" points="367,123.3086,377,127.3086,367,131.3086,371,127.3086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="373" y1="127.3086" y2="127.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="62.5" y="122.5664">PRE-1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="108.5" y="122.5664">What DFSPs are available to link with?</text><path d="M359,140.3086 L359,165.3086 L727,165.3086 L727,150.3086 L717,140.3086 L359,140.3086 " fill="#FBFB77" filter="url(#ffwen6vy7p5yh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M717,140.3086 L717,150.3086 L727,150.3086 L717,140.3086 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="404" y="157.877">TODO: What is the right URL path for this?</text><polygon fill="#A80036" points="686,222.0176,696,226.0176,686,230.0176,690,226.0176" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="692" y1="226.0176" y2="226.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="396" y="206.2314">PRE-2</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="442" y="190.686">GET /participants</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="442" y="205.8188">FSPIOP-Source: pispa</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="442" y="220.9517">FSPIOP-Destination: switch</text><polygon fill="#A80036" points="395,251.3281,385,255.3281,395,259.3281,391,255.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="389" x2="697" y1="255.3281" y2="255.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="401" y="250.5859">PRE-3</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="447" y="250.1733">202 Accepted</text><polygon fill="#A80036" points="400,356.6582,390,360.6582,400,364.6582,396,360.6582" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="697" y1="360.6582" y2="360.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="406" y="317.9063">PRE-4</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="452" y="279.395">PUT /participants</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="452" y="294.5278">FSPIOP-Source: switch</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="452" y="309.6606">FSPIOP-Destination: pispa</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="456" y="325.2949"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="456" y="324.9712">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="460" y="340.6055"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="476" y="340.2817">{ DFSP A }, { DFSP B }, ...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="696" y="340.6055"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="456" y="355.916"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="456" y="355.5923">]</text><polygon fill="#A80036" points="686,385.9688,696,389.9688,686,393.9688,690,389.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="389" x2="692" y1="389.9688" y2="389.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="396" y="385.2266">PRE-5</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="442" y="384.814">200 OK</text><polygon fill="#A80036" points="66.5,430.5898,56.5,434.5898,66.5,438.5898,62.5,434.5898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60.5" x2="383" y1="434.5898" y2="434.5898"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="72.5" y="422.1924">PRE-6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="118.5" y="414.5371">We have DFSP A, B, and C.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="118.5" y="429.8477">(and metadata on each)</text><!--MD5=[bb2d5144920777f7d8f4efc76df03baf]
@startuml

title PISP Linking: Pre-linking

box "Mobile device"
    participant App
end box

box "PISP"
    participant PISP
end box

box "Mojaloop"
    participant Switch
end box

autonumber 1 "<b>PRE-#</b>"
activate App
App -> PISP ++: What DFSPs are available to link with?

note over PISP, Switch
  TODO: What is the right URL path for this?
end note

PISP -> Switch ++: ""GET /participants""\n""FSPIOP-Source: pispa""\n""FSPIOP-Destination: switch""
Switch - -> PISP: ""202 Accepted""
deactivate PISP

Switch -> PISP ++: ""PUT /participants""\n""FSPIOP-Source: switch""\n""FSPIOP-Destination: pispa""\n ""[""\n  ""  { DFSP A }, { DFSP B }, ..."" \n ""]""
PISP - -> Switch: ""200 OK""

PISP - -> App - -: We have DFSP A, B, and C.\n(and metadata on each)

@enduml

PlantUML version 1.2020.18(Thu Oct 01 03:40:44 PHT 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>
